# MySQL to ClickHouse 迁移工具 - Web界面使用说明

## 功能特性

1. **Web配置界面**：通过浏览器方便地编辑迁移配置
2. **任务管理**：记录所有迁移任务的历史记录
3. **实时日志**：查看任务执行过程中的详细日志
4. **任务状态跟踪**：实时查看任务执行状态和进度

## 安装依赖

```bash
pip install -r requirements.txt
```

## 启动Web服务

```bash
python app.py
```

启动后，在浏览器中访问：`http://127.0.0.1:5000`

## 使用说明

### 1. 配置迁移参数

- 在主页填写MySQL和ClickHouse数据库连接信息
- 配置要迁移的表（可以添加多个表）
- 设置迁移参数（批次大小、验证选项等）
- 配置日志和性能参数
- 可选：配置飞书通知

### 2. 启动迁移任务

- 点击"保存配置"保存当前配置到 `conf.yaml`
- 点击"启动迁移任务"开始执行迁移
- 系统会自动跳转到任务详情页面

### 3. 查看任务历史

- 点击"查看任务历史"查看所有历史任务
- 点击任务ID或"查看详情"查看任务详细信息
- 在任务详情页面可以查看：
  - 任务基本信息
  - 每个表的迁移详情
  - 完整的执行日志

## 数据库

系统使用SQLite数据库 `migration_tasks.db` 存储：
- 任务记录（状态、统计信息等）
- 任务日志（所有执行日志）
- 表迁移详情（每个表的迁移结果）

## 注意事项

1. 启动任务后，任务会在后台线程中执行
2. 可以同时查看多个任务的详情
3. 任务完成后会自动停止日志刷新
4. 配置文件 `conf.yaml` 可以通过Web界面编辑，也可以手动编辑

